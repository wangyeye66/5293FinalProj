<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 [Model 1] Random Forest | EDA</title>
  <meta name="description" content="Chapter 2 [Model 1] Random Forest | EDA" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 [Model 1] Random Forest | EDA" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 [Model 1] Random Forest | EDA" />
  
  
  

<meta name="author" content="Han Wang" />


<meta name="date" content="2023-04-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="model-2-tree-regression.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">IMLV final project</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Proposal Descriptions</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-dataset"><i class="fa fa-check"></i><b>1.1</b> About Dataset</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#modeling-goal"><i class="fa fa-check"></i><b>1.2</b> Modeling Goal</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#methods"><i class="fa fa-check"></i><b>1.3</b> Methods</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#read-data-from-excel-file"><i class="fa fa-check"></i><b>1.4</b> Read data from Excel file</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#data-cleaning"><i class="fa fa-check"></i><b>1.5</b> Data Cleaning</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#data-pre-processing"><i class="fa fa-check"></i><b>1.6</b> Data pre-processing</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>1.7</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#most-sold-products"><i class="fa fa-check"></i><b>1.7.1</b> 1. Most sold Products</a></li>
<li class="chapter" data-level="1.7.2" data-path="index.html"><a href="index.html#costomer-base-across-the-countries"><i class="fa fa-check"></i><b>1.7.2</b> 2. Costomer base across the countries</a></li>
<li class="chapter" data-level="1.7.3" data-path="index.html"><a href="index.html#total-sales-by-hour"><i class="fa fa-check"></i><b>1.7.3</b> 3. Total Sales by Hour</a></li>
<li class="chapter" data-level="1.7.4" data-path="index.html"><a href="index.html#total-sales-by-day"><i class="fa fa-check"></i><b>1.7.4</b> 4. Total Sales by Day</a></li>
<li class="chapter" data-level="1.7.5" data-path="index.html"><a href="index.html#total-sales-by-month"><i class="fa fa-check"></i><b>1.7.5</b> 5. Total Sales by Month</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#change-categorical-to-numerical"><i class="fa fa-check"></i><b>1.8</b> Change Categorical to Numerical</a></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#checking-for-principal-components"><i class="fa fa-check"></i><b>1.9</b> Checking for Principal Components</a></li>
<li class="chapter" data-level="1.10" data-path="index.html"><a href="index.html#drop-outliers"><i class="fa fa-check"></i><b>1.10</b> Drop Outliers</a></li>
<li class="chapter" data-level="1.11" data-path="index.html"><a href="index.html#save-cleaned-data"><i class="fa fa-check"></i><b>1.11</b> Save Cleaned Data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="model-1-random-forest.html"><a href="model-1-random-forest.html"><i class="fa fa-check"></i><b>2</b> [Model 1] Random Forest</a>
<ul>
<li class="chapter" data-level="2.1" data-path="model-1-random-forest.html"><a href="model-1-random-forest.html#perform-random-forest-regression"><i class="fa fa-check"></i><b>2.1</b> Perform Random Forest Regression</a></li>
<li class="chapter" data-level="2.2" data-path="model-1-random-forest.html"><a href="model-1-random-forest.html#random-forest-regression-evaluation"><i class="fa fa-check"></i><b>2.2</b> Random Forest Regression Evaluation</a></li>
<li class="chapter" data-level="2.3" data-path="model-1-random-forest.html"><a href="model-1-random-forest.html#interpretation-of-random-forest-model"><i class="fa fa-check"></i><b>2.3</b> Interpretation of Random Forest Model</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="model-2-tree-regression.html"><a href="model-2-tree-regression.html"><i class="fa fa-check"></i><b>3</b> [Model 2] Tree Regression</a>
<ul>
<li class="chapter" data-level="3.1" data-path="model-2-tree-regression.html"><a href="model-2-tree-regression.html#perform-tree-regression"><i class="fa fa-check"></i><b>3.1</b> Perform Tree Regression</a></li>
<li class="chapter" data-level="3.2" data-path="model-2-tree-regression.html"><a href="model-2-tree-regression.html#tree-regression-evaluation"><i class="fa fa-check"></i><b>3.2</b> Tree Regression Evaluation</a></li>
<li class="chapter" data-level="3.3" data-path="model-2-tree-regression.html"><a href="model-2-tree-regression.html#interpretation-of-tree-regression-model"><i class="fa fa-check"></i><b>3.3</b> Interpretation of Tree Regression Model</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="model-3-linear-regression.html"><a href="model-3-linear-regression.html"><i class="fa fa-check"></i><b>4</b> [Model 3] Linear Regression</a>
<ul>
<li class="chapter" data-level="4.1" data-path="model-3-linear-regression.html"><a href="model-3-linear-regression.html#perform-linear-regression"><i class="fa fa-check"></i><b>4.1</b> Perform Linear Regression</a></li>
<li class="chapter" data-level="4.2" data-path="model-3-linear-regression.html"><a href="model-3-linear-regression.html#linear-regression-evaluation"><i class="fa fa-check"></i><b>4.2</b> Linear Regression Evaluation</a></li>
<li class="chapter" data-level="4.3" data-path="model-3-linear-regression.html"><a href="model-3-linear-regression.html#interpretation-of-linear-model"><i class="fa fa-check"></i><b>4.3</b> Interpretation of Linear Model</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reflections.html"><a href="reflections.html"><i class="fa fa-check"></i><b>5</b> Reflections</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reflections.html"><a href="reflections.html#a-summary-three-models"><i class="fa fa-check"></i><b>5.1</b> A Summary Three Models</a></li>
<li class="chapter" data-level="5.2" data-path="reflections.html"><a href="reflections.html#discussion"><i class="fa fa-check"></i><b>5.2</b> Discussion</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="reflections.html"><a href="reflections.html#limitation"><i class="fa fa-check"></i><b>5.2.1</b> Limitation</a></li>
<li class="chapter" data-level="5.2.2" data-path="reflections.html"><a href="reflections.html#future-directions"><i class="fa fa-check"></i><b>5.2.2</b> Future Directions</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EDA</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-1-random-forest" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> [Model 1] Random Forest<a href="model-1-random-forest.html#model-1-random-forest" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="perform-random-forest-regression" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Perform Random Forest Regression<a href="model-1-random-forest.html#perform-random-forest-regression" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre><code>## 
## Call:
##  randomForest(formula = Sales ~ ., data = trainset, ntree = 1000,      importance = TRUE) 
##                Type of random forest: regression
##                      Number of trees: 1000
## No. of variables tried at each split: 1
## 
##           Mean of squared residuals: 4088.363
##                     % Var explained: 13.87</code></pre>
<pre><code>## [1] &quot;The RMSE is: 51.6027152860615&quot;</code></pre>
<p><img src="finalproj_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>We can see from the image above that there are many outliers in our data, which reduces prediction performance. Furthermore, the RMSE for this model is around 36.65 and only 35.33% of variance can be explained by this model. We must eliminate the outliers to get a better result. For the next two models, I will only use the dataset without the outliers.</p>
</div>
<div id="random-forest-regression-evaluation" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Random Forest Regression Evaluation<a href="model-1-random-forest.html#random-forest-regression-evaluation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre><code>## 
## Call:
##  randomForest(formula = Sales ~ ., data = trainset.adj, ntree = 1000,      importance = TRUE) 
##                Type of random forest: regression
##                      Number of trees: 1000
## No. of variables tried at each split: 1
## 
##           Mean of squared residuals: 13.97715
##                     % Var explained: 80.34</code></pre>
<pre><code>## [1] &quot;The RMSE is: 3.79682328601374&quot;</code></pre>
<p><img src="finalproj_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>We can see from the above figure that the data points center together after we remove the outliers and retrain the random forest model. The variance explained by the model reach to 80%. The RMSE drops to 4. Overall, the prediction accuracy improves significantly.</p>
</div>
<div id="interpretation-of-random-forest-model" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Interpretation of Random Forest Model<a href="model-1-random-forest.html#interpretation-of-random-forest-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>PDP</p>
<p>Partial Dependence Plot is a type of data visualization technique commonly used in machine learning to understand the relationship between a target variable and one or more predictor variables.</p></li>
</ul>
<p><img src="finalproj_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>We can deduce from the Partial Dependence Plot that there is a logarithmic growth relationship between <code>UnitPrice</code> and the intended variable, <code>Sales</code>. In other words, when the <code>UnitPrice</code> rises, <code>Sales</code> will rise logarithmically. When it comes to the relationship between <code>Quantity</code> and <code>Sales</code>, when <code>Quantity</code> ranges between 0 and 25, <code>Sales</code> will increase dramatically. <code>Sales</code> will increase gradually for quantities of more than 25. As <code>time</code> increases, there is a steady diminishing tendency. That is, customers tend to buy less at the end of the day. The plot also implies that the <code>month</code> and <code>week</code> have little influence on total sales because their lines are very flat.</p>
<ul>
<li><p>VIP</p>
<p>Variance Importance Plot is a graphical representation of the importance of each predictor variable in a statistical or machine learning model.</p></li>
</ul>
<p><img src="finalproj_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>The graphic makes it obvious that quantity, followed by unit price and time, is the most crucial factor in predicting total sales. The time variable is much less significant than the other two, though. Finally, week and month are two factors that are not important in the Ramdom Forest Regression model. This plot conveys the results from the Partial Dependence Plot.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model-2-tree-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/wangyeye66/5293FinalProj/edit/main/model1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/wangyeye66/5293FinalProj/blob/main/model1.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
